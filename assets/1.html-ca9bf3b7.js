import{_ as e,r as p,o,c as l,a as n,d as s,b as t,e as c}from"./app-add35868.js";const i={},u={href:"https://juejin.cn/post/7097442907195605006",target:"_blank",rel:"noopener noreferrer"},r=c(`<h2 id="待解决的问题-需求" tabindex="-1"><a class="header-anchor" href="#待解决的问题-需求" aria-hidden="true">#</a> 待解决的问题/需求</h2><p>业务里出现长表单提交时，用户/业务方/产品经理经常会提的一个需求就是表单校验失败你应该给我滚动定位到对应的错误位置，方便我知道哪里出现了错误。也是提升填写长表单时的用户体验一个很常见的做法。</p><h2 id="解决方案" tabindex="-1"><a class="header-anchor" href="#解决方案" aria-hidden="true">#</a> 解决方案</h2><h3 id="utils-index-js" tabindex="-1"><a class="header-anchor" href="#utils-index-js" aria-hidden="true">#</a> utils/index.js</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// el-form校验失败滚动到对应的错误位置</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">elFormErrorScrollIntoView</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 获取第一个校验错误的元素</span>
  <span class="token keyword">const</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&#39;.el-form-item__error&#39;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
  <span class="token comment">// 滚动到错误元素对应位置</span>
  element<span class="token punctuation">.</span><span class="token function">scrollIntoView</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">behavior</span><span class="token operator">:</span> <span class="token string">&#39;smooth&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">block</span><span class="token operator">:</span> <span class="token string">&#39;center&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="form-vue" tabindex="-1"><a class="header-anchor" href="#form-vue" aria-hidden="true">#</a> form.vue</h3><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-form</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:rules</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>rules<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        ...
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-form</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submitForm<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>提交<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> <span class="token punctuation">{</span> elFormErrorScrollIntoView <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/utils&#39;</span>
    
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">form</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token function">submitForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>form<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">valid</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>valid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token comment">// 数据校验成功</span>
                        <span class="token operator">...</span>
                    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                        <span class="token comment">// 数据校验失败</span>
                        <span class="token comment">// 使用$nextTick的原因是，错误提示的元素是在视图更新后出现的，不使用$nextTick获取元素是undefined</span>
                        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                            <span class="token function">elFormErrorScrollIntoView</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                        <span class="token punctuation">}</span><span class="token punctuation">)</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="知识点、参考文档" tabindex="-1"><a class="header-anchor" href="#知识点、参考文档" aria-hidden="true">#</a> 知识点、参考文档</h2><h3 id="document-queryselectall" tabindex="-1"><a class="header-anchor" href="#document-queryselectall" aria-hidden="true">#</a> document.querySelectAll</h3>`,9),d={href:"https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelectorAll",target:"_blank",rel:"noopener noreferrer"},k=n("h3",{id:"element-scrollintoview",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#element-scrollintoview","aria-hidden":"true"},"#"),s(" Element.scrollIntoView()")],-1),m={href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Element/scrollIntoView",target:"_blank",rel:"noopener noreferrer"},v=n("h3",{id:"兼容性",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#兼容性","aria-hidden":"true"},"#"),s(" 兼容性")],-1),h=n("blockquote",null,[n("p",null,"参考文档：https://caniuse.com/?search=scrollIntoView 支持率非常好，可以放心使用，很多部分支持仅仅只是不支持smooth参数")],-1);function b(f,g){const a=p("ExternalLinkIcon");return o(),l("div",null,[n("blockquote",null,[n("p",null,[s("首发于稀土掘金社区："),n("a",u,[s("https://juejin.cn/post/7097442907195605006"),t(a)]),s(" 写在前面：如果您认为我这个实现方案简洁好用，请点赞、评论加收藏，感谢！如果发现这个方案还有欠缺或错误的地方欢迎评论指正。如果您有更好的方案也欢迎评论分享")])]),r,n("blockquote",null,[n("p",null,[s("参考文档："),n("a",d,[s("https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelectorAll"),t(a)])])]),k,n("blockquote",null,[n("p",null,[s("参考文档："),n("a",m,[s("https://developer.mozilla.org/zh-CN/docs/Web/API/Element/scrollIntoView"),t(a)])])]),v,h])}const y=e(i,[["render",b],["__file","1.html.vue"]]);export{y as default};
